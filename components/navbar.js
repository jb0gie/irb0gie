import Logo from './logo'
import NextLink from 'next/link'
import {
  Container,
  Box,
  Link,
  Stack,
  Heading,
  Flex,
  Menu,
  MenuItem,
  MenuButton,
  IconButton,
  useColorModeValue,
  MenuList,
  Tooltip
} from '@chakra-ui/react'
import { HamburgerIcon } from '@chakra-ui/icons'
import ThemeToggleButton from './theme-toggle-button'

const LinkItem = ({ href, path, children }) => {
  const active = path === href
  const inactiveColor = useColorModeValue('gray200', 'whiteAlpha.900')
  return (
    <NextLink href={href} passHref>
      <Link
        p={2}
        bg={active ? 'glassTeal' : undefined}
        color={active ? '#247420' : inactiveColor}
      >
        {children}
      </Link>
    </NextLink>
  )
}
const Lens = ({ href, children }) => (
  <NextLink href={href} passHref>
    <Tooltip hasArrow label="Follow me on Lens" bg="gray.300" color="black">
      <Link p={2}>{children}</Link>
    </Tooltip>
  </NextLink>
)
const Mastodon = ({ href, children }) => (
  <NextLink href={href} passHref>
    <Tooltip hasArrow label="Follow me on Mastodon" bg="gray.300" color="black">
      <Link p={2} rel="me">
        {children}
      </Link>
    </Tooltip>
  </NextLink>
)

const BlueSky = ({ href, children }) => (
  <NextLink href={href} passHref>
    <Tooltip hasArrow label="Follow me on BlueSky" bg="gray.300" color="black">
      <Link p={2}>{children}</Link>
    </Tooltip>
  </NextLink>
)
const Hyperfy = ({ href, children }) => (
  <NextLink href={href} passHref>
    <Tooltip hasArrow label="Visit my Hyperfy World" bg="gray.300" color="black">
      <Link p={2}>{children}</Link>
    </Tooltip>
  </NextLink>
)

const Navbar = (props) => {
  const { path } = props

  return (
    <Box
      position="fixed"
      as="nav"
      w="100%"
      bg={useColorModeValue('#ffffff40', '#20202380')}
      style={{ backdropFilter: 'blur(10px' }}
      zIndex={1}
      {...props}
    >
      <Container
        display="flex"
        p={2}
        maxW="container.md"
        wrap="wrap"
        align="center"
        justify="space-between"
      >
        <Flex align="center" mr={5}>
          <Logo />
        </Flex>
        <Stack
          direction={{ base: 'column', md: 'row' }}
          display={{ base: 'none', md: 'flex' }}
          width={{ base: 'full', md: 'auto' }}
          alignItems="center"
          flexGrow={1}
          mt={{ base: 4, nmd: 0 }}
        >
          <LinkItem href="/works" path={path}>
            𝕎𝕆ℝ𝕂𝕊
          </LinkItem>
          <LinkItem href="/posts" path={path}>
            ℙ𝕆𝕊𝕋𝕊
          </LinkItem>
          <Lens href="https://www.lensfrens.xyz/szabo0genie.lens">
            <svg
              width="32"
              height="32"
              viewBox="0 0 28 27"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M27.038 24.1564L26.7566 24.2868C25.0529 25.0632 23.1418 25.2608 21.3152 24.8494C20.3411 24.6355 19.4121 24.2523 18.5705 23.7172C20.2384 24.1484 22.007 23.9429 23.5316 23.1409L23.7512 23.0242L24.0462 22.8595L23.2228 21.4117L22.9277 21.5832L22.7631 21.6724C21.9603 22.0987 21.0603 22.3083 20.1518 22.2806C19.2433 22.2529 18.3577 21.9889 17.5824 21.5146C16.8947 21.1032 16.3075 20.5435 15.8635 19.8764C15.4195 19.2093 15.1301 18.4515 15.0161 17.6583C19.0003 17.2893 22.7398 15.5733 25.6176 12.7933L25.9195 12.4776C26.4256 11.973 26.8178 11.366 27.0699 10.6973C27.322 10.0286 27.4281 9.31375 27.381 8.60067C27.2642 7.32022 26.695 6.12331 25.7754 5.22467C24.8778 4.30358 23.6803 3.73404 22.3994 3.61901C21.2828 3.54039 20.1733 3.84807 19.2567 4.49045C19.066 3.38669 18.4956 2.38425 17.6441 1.65652C16.6588 0.830181 15.4099 0.384645 14.124 0.400816C12.848 0.385004 11.6079 0.822699 10.6245 1.63593C9.77703 2.36697 9.20753 3.36786 9.012 4.46987C8.09565 3.82697 6.98585 3.51922 5.86928 3.5984C4.58883 3.71521 3.39191 4.28449 2.49328 5.20409C1.5727 6.10126 1.00526 7.29942 0.894463 8.58009C0.846532 9.29325 0.952201 10.0084 1.20434 10.6772C1.45648 11.3461 1.84923 11.953 2.35603 12.457C2.4521 12.5668 2.55503 12.6697 2.65795 12.7727C5.53334 15.5522 9.27049 17.2683 13.2526 17.6377C13.14 18.4314 12.8511 19.1897 12.407 19.857C11.9629 20.5244 11.3749 21.0837 10.6863 21.494C9.91224 21.9684 9.02773 22.2325 8.12031 22.2602C7.21289 22.2878 6.31397 22.0782 5.51245 21.6519L5.34091 21.5627L5.04585 21.3911L4.22243 22.8389L4.52435 23.0036C4.59295 23.0466 4.66397 23.0855 4.73706 23.1203C6.26165 23.9223 8.03032 24.1278 9.69818 23.6967C8.85723 24.233 7.92799 24.6163 6.95346 24.8289C5.12685 25.2402 3.21578 25.0426 1.512 24.2662L1.23069 24.1358L0.400391 25.5768L0.736655 25.7346C2.79568 26.6783 5.10769 26.9194 7.31711 26.4208C9.56561 25.9364 11.5804 24.6965 13.0261 22.9076L13.2869 22.5713V26.7364H14.9474V22.5576C15.0298 22.6811 15.119 22.7978 15.2082 22.9076C16.6459 24.7208 18.6645 25.9833 20.9241 26.4826C21.6605 26.6492 22.4129 26.7344 23.1679 26.7364C24.669 26.7345 26.1515 26.4043 27.5114 25.7689L27.8408 25.6111L27.038 24.1564ZM10.5696 6.15787C10.5696 6.05494 10.5696 5.95888 10.5696 5.86281C10.5696 5.76675 10.5696 5.60207 10.5696 5.47855C10.5692 5.01622 10.6623 4.55856 10.8433 4.1331C11.0242 3.70764 11.2893 3.32314 11.6225 3.00269C11.9558 2.68223 12.3504 2.43246 12.7826 2.26834C13.2148 2.10422 13.6758 2.02915 14.1378 2.04765C14.5997 2.02915 15.0607 2.10422 15.4929 2.26834C15.9251 2.43246 16.3197 2.68223 16.653 3.00269C16.9862 3.32314 17.2513 3.70764 17.4323 4.1331C17.6132 4.55856 17.7063 5.01622 17.7059 5.47855C17.7059 5.60207 17.7059 5.73244 17.7059 5.86281C17.7059 5.99319 17.7059 6.06181 17.7059 6.16474L17.651 8.40167L19.2086 6.75484L19.4008 6.56271L19.6752 6.28824C20.0026 5.9632 20.3922 5.70751 20.8206 5.53648C21.2491 5.36544 21.7076 5.28256 22.1689 5.29281C22.6301 5.30306 23.0845 5.40624 23.5049 5.59614C23.9253 5.78604 24.3032 6.05877 24.6158 6.39804C24.955 6.71064 25.2278 7.08846 25.4177 7.50889C25.6076 7.92932 25.7107 8.38373 25.721 8.84494C25.7312 9.30616 25.6483 9.76471 25.4773 10.1932C25.3063 10.6216 25.0506 11.0112 24.7255 11.3386L24.4579 11.6199C21.6612 14.2703 18.0127 15.8391 14.1652 16.0457C10.3171 15.8415 6.66782 14.2723 3.87247 11.6199L3.59802 11.3386C3.27297 11.0112 3.01729 10.6216 2.84625 10.1932C2.67522 9.76471 2.59234 9.30616 2.60259 8.84494C2.61284 8.38373 2.71599 7.92932 2.90589 7.50889C3.09579 7.08846 3.36852 6.71064 3.70779 6.39804C4.38462 5.6998 5.30881 5.29562 6.28097 5.27269C7.17297 5.2865 8.02358 5.6514 8.6483 6.28824L8.92966 6.55586L9.13551 6.77543L10.6794 8.40167L10.5696 6.15787Z"
                fill="#00501E"
              />
            </svg>
          </Lens>
          <Mastodon href="https://mastodon.247420.xyz/@irb0gie">
            <svg
              width="32"
              height="32"
              viewBox="0 0 61 65"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M60.7539 14.3904C59.8143 7.40642 53.7273 1.90257 46.5117 0.836066C45.2943 0.655854 40.6819 0 29.9973 0H29.9175C19.2299 0 16.937 0.655854 15.7196 0.836066C8.70488 1.87302 2.29885 6.81852 0.744617 13.8852C-0.00294988 17.3654 -0.0827298 21.2237 0.0561464 24.7629C0.254119 29.8384 0.292531 34.905 0.753482 39.9598C1.07215 43.3175 1.62806 46.6484 2.41704 49.9276C3.89445 55.9839 9.87499 61.0239 15.7344 63.0801C22.0077 65.2244 28.7542 65.5804 35.2184 64.1082C35.9295 63.9428 36.6318 63.7508 37.3252 63.5321C38.8971 63.0329 40.738 62.4745 42.0913 61.4937C42.1099 61.4799 42.1251 61.4621 42.1358 61.4417C42.1466 61.4212 42.1526 61.3986 42.1534 61.3755V56.4773C42.153 56.4557 42.1479 56.4345 42.1383 56.4151C42.1287 56.3958 42.1149 56.3788 42.0979 56.3655C42.0809 56.3522 42.0611 56.3429 42.04 56.3382C42.019 56.3335 41.9971 56.3336 41.9761 56.3384C37.8345 57.3276 33.5905 57.8234 29.3324 57.8156C22.0045 57.8156 20.0336 54.3384 19.4693 52.8908C19.0156 51.6397 18.7275 50.3346 18.6124 49.0088C18.6112 48.9866 18.6153 48.9643 18.6243 48.9439C18.6333 48.9236 18.647 48.9056 18.6643 48.8915C18.6816 48.8774 18.7019 48.8675 18.7237 48.8628C18.7455 48.858 18.7681 48.8585 18.7897 48.8641C22.8622 49.8465 27.037 50.3423 31.2265 50.3412C32.234 50.3412 33.2387 50.3412 34.2463 50.3146C38.4598 50.1964 42.9009 49.9808 47.0465 49.1713C47.1499 49.1506 47.2534 49.1329 47.342 49.1063C53.881 47.8507 60.1038 43.9097 60.7362 33.9301C60.7598 33.5372 60.8189 29.8148 60.8189 29.4071C60.8218 28.0215 61.2651 19.5781 60.7539 14.3904Z"
                fill="url(#paint0_linear_89_8)"
              />
              <path
                d="M50.3943 22.237V39.5876H43.5185V22.7481C43.5185 19.2029 42.0411 17.3949 39.036 17.3949C35.7325 17.3949 34.0778 19.5338 34.0778 23.7585V32.9759H27.2434V23.7585C27.2434 19.5338 25.5857 17.3949 22.2822 17.3949C19.2949 17.3949 17.8027 19.2029 17.8027 22.7481V39.5876H10.9298V22.237C10.9298 18.6918 11.835 15.8754 13.6453 13.7877C15.5128 11.7049 17.9623 10.6355 21.0028 10.6355C24.522 10.6355 27.1813 11.9885 28.9542 14.6917L30.665 17.5633L32.3788 14.6917C34.1517 11.9885 36.811 10.6355 40.3243 10.6355C43.3619 10.6355 45.8114 11.7049 47.6847 13.7877C49.4931 15.8734 50.3963 18.6899 50.3943 22.237Z"
                fill="white"
              />
              <defs>
                <linearGradient
                  id="paint0_linear_89_8"
                  x1="30.5"
                  y1="0"
                  x2="30.5"
                  y2="65"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor="#6364FF" />
                  <stop offset="1" stopColor="#563ACC" />
                </linearGradient>
              </defs>
            </svg>
          </Mastodon>
          <BlueSky href="https://bsky.app/profile/b0gie.bsky.social">
            <svg
              viewBox="310.9487 173.2524 31.9029 32"
              width="31.9029"
              height="32"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g transform="matrix(1, 0, 0, 1, 301.0044860839844, 146.7252197265625)">
                <g transform="matrix(1, 0, 0, 1, 9.944201, 26.527164)">
                  <path
                    fill="#297AD3"
                    d="M26.5,32H5.5C2.5,32,0,29.5,0,26.5V5.5C0,2.5,2.5,0,5.5,0h20.9c3,0,5.5,2.5,5.5,5.5v20.9 C32,29.5,29.5,32,26.5,32z"
                  />
                  <g>
                    <path
                      fill="#FFFFFF"
                      d="M10.2,12.2c0.9-0.6,1.7-1.1,2.7-1.6c0.8-0.3,1.6,0.2,2.1,0.9c0.1,0.1,0.4,0.4,0.5,0.6 c0.4,0.4,0.9,0.4,1.3,0l1.6-1.2c0.7-0.6,1.7-0.4,2.4,0.2c1.1,0.8,2.2,1.6,3.2,2.4c-1.4-0.6-2.8-1.3-4.1-1.9 c-0.3-0.1-0.7-0.1-1,0.1c-0.4,0.3-1.6,1.4-2.1,1.6c-0.8,0.4-1.8,0.1-2.3-0.7l-0.3-0.4c-0.3-0.4-0.7-0.9-1.3-0.8 C12.1,11.5,11.1,11.9,10.2,12.2L10.2,12.2z"
                    />
                    <path
                      fill="#FFFFFF"
                      d="M20,21.1c0.8-0.7,1.9-1.7,2.9-0.8c0.4,0.3,0.9,0.4,1.3,0.1c0.3-0.2,0.5-0.6,1-0.8c1.3-0.6,2.5,0.7,3.6,1.2 c-1-0.1-2.4-1.1-3.3-0.7c-0.3,0.1-0.5,0.5-0.9,0.8c-0.4,0.3-1,0.4-1.5,0.2c-0.4-0.1-0.6-0.5-1-0.6C21.4,20.2,20.7,20.9,20,21.1 L20,21.1z"
                    />
                    <path
                      fill="#FFFFFF"
                      d="M3.7,17.5c1-0.4,2-1.2,3.1-0.6c0.6,0.3,0.7,1,1,1.1c0.3,0.2,0.7,0.3,1,0.1c0.5-0.2,0.9-0.5,1.4-0.7 c0.6-0.2,1.4,0,1.7,0.5c0.8,0.7,1.5,1.4,2.1,2.2c-0.9-0.5-1.7-1.1-2.5-1.7c-0.6-0.5-1.1-0.3-1.7,0.1c-0.7,0.5-1.8,0.9-2.5,0.2 c-0.5-0.5-0.6-1-0.9-1.2C5.7,16.8,4.6,17.5,3.7,17.5L3.7,17.5z"
                    />
                  </g>
                </g>
              </g>
            </svg>
          </BlueSky>
          <Hyperfy href="https://hyperfy.io/thegame">
            <svg
              width="32"
              height="32"
              viewBox="0 0 300 300"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M149.882 287.948L150 288L150 287.948L235.841 131.604C239.255 125.314 234.719 117.649 227.582 117.649L150 117.649V11.0522L150.114 11.0522L150 11L150 11.0522L64.1593 167.396C60.7453 173.686 65.2813 181.351 72.4175 181.351H150V287.948H149.882Z"
                fill="white"
              />
            </svg>
          </Hyperfy>
        </Stack>

        <Box flex={1} align="right">
          <ThemeToggleButton />
          <Box ml={2} display={{ base: 'inline-block', md: 'none' }}>
            <Menu>
              <MenuButton
                as={IconButton}
                icon={<HamburgerIcon />}
                variant="outline"
                aria-label="Options"
              />
              <MenuList>
                <NextLink href="/" passHref>
                  <MenuItem as={Link}>❓ ｈｕｈ　内謁履</MenuItem>
                </NextLink>
                <NextLink href="/works" passHref>
                  <MenuItem as={Link}>𝕨𝕠𝕣𝕜𝕤</MenuItem>
                </NextLink>
                <NextLink href="/posts" passHref>
                  <MenuItem as={Link}>𝕡𝕠𝕤𝕥𝕤</MenuItem>
                </NextLink>
                <MenuItem as={Link} href="https://247420.xyz/@6">
                  ｓｏｃｉａｌ　ヒー河
                </MenuItem>
              </MenuList>
            </Menu>
          </Box>
        </Box>
      </Container>
    </Box>
  )
}

export default Navbar
